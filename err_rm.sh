#!/bin/bash

#Auth
clear
echo "Wnet corp. "
echo " "
echo "Created for Wnet by 4TuNA@wnet.ua Â© 2020"
echo " "
echo "###########################################################################################################"
echo "###########################################################################################################"
echo "###########################################################################################################"
echo "###########################################################################################################"
echo "#####################################################@=++=%@#######@%+-..:+@@@#############################"
echo "###############################################%++%####################@@*...*@@###########################"
echo "##########################################@+:%##########################@%+....%@##########################"
echo "######################@%%%%%%%%%%%@###@+-=#############@%%%%%%%%%%%@####@%=....+@##########################"
echo "######################%+++++++++++%#:-@###############%+++++++++++%#####@%+.. .=@##########################"
echo "######################=+++++++++++%#####=+++++%######%+++++++++++@#####@@%....:%@##########################"
echo "######################=+++++++++++@####=++++++%#####=+++++++++++@#####@@%....:%@###########################"
echo "######################=+++++++++++####=+++++++%####=+++++++++++######@@=....*%@############################"
echo "######################=+++++++++++###%++++++++@###=+++++++++++#######@:...-%@@###################@++#######"
echo "##################@@*#=+++++++++++##%+++++++++@##=+++++++++++#######@+=+:=@@####################@--%#######"
echo "###############@@=..-@+++++++++++=#%++++++++++@#=++++++++++=#######=*:-:+#########@=*:-:=######@--:***=####"
echo "#############@@+...*@@+++++++++++=%+++++++++++@=++++++++++=#####*--:++:---#####%:--*==*---=####--:****#####"
echo "###########@@=...-%@##+++++++++++++++++++++++++++++++++++%####*-:######*--###=--=#######--:###:-+##########"
echo "#########@@%-...=@@###++++++++++++++++==++++++++++++++++%####:-+######@--%##:-:========+--=##:-+###########"
echo "########@@+...:%@@####+++++++++++++++@##+++++++++++++++%####:-*#######--=##:-:***********=##:-*############"
echo "#######@%:...:%@######++++++++++++++%##@++++++++++****=*.%#*-*#######--=##=--=#######@#####*-:#############"
echo "######@%:...-%@@######+++++++++++++%###%+++++******:...=@#*-:#######:-+###@---*%@%*--:####@---=@%+*########"
echo "#####@%*.  .+%@#######++++++++++++%####=+******:....+@@##+-:#######:-+######+----:+@#######%:---:+#########"
echo "#####@%... .+%@#######+++++++++++=####@+***-....-**@#######################################################"
echo "#####@=... ..=%@@#####+++++++***+@@@@%+-....-:***+#########################################################"
echo "#####@%..   ..-=%%@@@@**********+:......-:*****+=##########################################################"
echo "######@=...     ..-::*---..........:=@=****++++%###########################################################"
echo "#######@@=-.................-:+%@@@@#######################################################################"
echo "#########@@@%%=++**++==%%@@@@@@############################################################################"
echo "###############@@@@@@@#####################################################################################"
echo "###########################################################################################################"
echo "###########################################################################################################"

if [ "$1" = "-h" ] ; then 
      echo "err_rm.sh hostname username port"
      echo " On Junipper err_rm.sh 192.168.1.1 admin xe-1/0/25"
      echo " On D-Link err_rm.sh 192.168.1.1 admin 25"
      exit 1
elif [ "$1" = "-help" ] ; then 
      echo "err_rm.sh hostname username port"
      echo " On Junipper err_rm.sh 192.168.1.1 admin xe-1/0/25"
      echo " On D-Link err_rm.sh 192.168.1.1 admin 25"
      exit 1
elif [ "$1" = "--help" ] ; then 
      echo "err_rm.sh hostname username port"
      echo " On Junipper err_rm.sh 192.168.1.1 admin xe-1/0/25"
      echo " On D-Link err_rm.sh 192.168.1.1 admin 25"
      exit 1
else 
      echo " " 
fi

echo "  " 
echo "Enter Password"

PASSWORD=""

while
read -s -n1 BUFF
[[ -n $BUFF ]]
do
    if [[ `printf "%d\n" \'$BUFF` == 127 ]]
    then
        PASSWORD="${PASSWORD%?}"
        echo -en "\b \b"
    else
        PASSWORD=$PASSWORD$BUFF
        echo -en "*"
    fi
done

echo " "
echo "Telnet connetcin on host $1 username $2"
echo " "
echo "Need to clear errors on port $3"
echo " "

echo "Select a node firm"
echo " "
echo "1. Junipper"
echo "2. D-link"
read -n 1 choice
echo " "
if [ $choice -eq "1" ]
then
        echo "Junipper"
	(
	sleep 2;
	echo -en "$2\r";
	sleep 1;
	echo -en "$PASSWORD\r";
	sleep 1;
	echo -ne "show interfaces statistics $3 | match err"
	echo -ne '\n'
	sleep 1;
	echo -ne "clear interfaces statistics $3"
	echo -ne '\n'
	sleep 1;
	echo -ne "show interfaces statistics $3 | match err"
	echo -ne '\n'
	sleep 1;
	) | telnet $1

elif [ $choice -eq "2" ]
then
        echo "D-Link"   
	(
        sleep 2;
        echo -en "$2\r";
        sleep 1;
        echo -en "$PASSWORD\r";
        sleep 1;
        echo -ne "show error ports $3"
        echo -ne '\n'
        sleep 1;
        echo -ne "clear counter ports $3"
        echo -ne '\n'
        sleep 1;
        echo -ne "show error ports $3"
        echo -ne '\n'
        sleep 1;
        ) | telnet $1
  
else
  echo "Wrong input"
fi


exit 1
